# Implementation
## General structure
The program's structure is shown below.

```mermaid
classDiagram
  Server-->Template
  Server-->MarkovChain
  MarkovChain-->Trie
  Trie-->Books
  Trie-->TrieNode

  class TrieNode
    TrieNode: Dict children
    TrieNode: Boolean is_sentence
    TrieNode: Int Frequency
    
  class Trie
    Trie: TrieNode root
    Trie: insert_books()
    Trie: insert(sentence)
    Trie: generate_ngrams(state)
  
  class MarkovChain
    MarkovChain: Trie trie
    MarkovChain: Int state
    MarkovChain: Dict ngrams
    MarkovChain: generate_sentence(starting_prompt, max_length)
    MarkovChain: handle_starting_prompt(starting_prompt, degree)
    MarkovChain: greater_or_equal_prompt(starting_prompt, degree)
    MarkovChain: shorter_prompt(starting_prompt)

  class Books

  class Server
    Server: UI
    Server: index(starting_prompt, state)
    Server: call_generate_sentences(markov_chain, starting_prompt)

  class Template
    Template: index.html
  ```

## Space and time complexities
### Trie
The space complexity of the trie is **O(amount of words * average word length * N)** where N is the number of sentences in the trie.
#### Insert
Since on average the Trie needs to be travesed N length when inserting a sentence, the time complexity of insert is **O(N)**, where N = length of inserted sentence. <br><br>
The space complexity of insert is also **O(N)**, where N = length of sentence, since in the worst case N nodes need to be added to trie.
#### Generate Ngrams
The Ngrams are generated by using DFS. Because the time spent processing each node is constant, the time complexity of the DFS is **O(N)**, where N is the total number of nodes in the tree. The time complexity of updating the ngrams dictionary is also constant, as it only involves dictionary operations that have an average time complexity of **O(1)**. <br><br>
The space complexity of the DFS is **O(N)**, where N is the maximum depth of the tree. This is because the DFS uses a recursive approach to traverse the tree, and each recursive call adds a new stack frame to the call stack. Therefore, the space complexity depends on the height of the tree and the number of recursive calls that the algorithm makes.

### Markov Chain
Constructing the Markov model takes **O(N)** space, where N = the amount of nodes in the Trie.
#### Generate sentences
Generating a sentence involves iterating through the ngrams dictionary until the maximum length of the sentence is reached or there are no more possibilities for the next word. This loop has a worst-case time complexity of **O(max length * size of Ngrams dictionary)**.<br><br>
The space complexity of the generating sentences is **O(N)** where N = max length of sentence.
## Points of improvement
To be updated...

## Sources/Links
